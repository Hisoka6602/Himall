@model Himall.Web.Models.ShopPersonal
@using Himall.Core;
@{
    ViewBag.Title = "Edit";
}
<link rel="stylesheet" type="text/css" href="~/Content/bootstrap-datetimepicker.min.css">
<script src="~/Scripts/jquery.himall.Region.js"></script>
<script src="~/Scripts/jquery.himallUpload.js"></script>
<script src="~/Scripts/jquery.himallLinkage.nocreate.js"></script>
<script src="~/Areas/Admin/Scripts/ShopEditPersonal.js"></script>
<script type="text/javascript" src="~/Scripts/bootstrap-datetimepicker.js"></script>
<script type="text/javascript" src="~/Scripts/bootstrap-datetimepicker.zh-CN.js"></script>

<script type="text/javascript">
	var bankRegionIds = "@ViewBag.BankRegionIds";
	var companyRegionIds = "@ViewBag.CompanyRegionIds";

    $(function () {
        //if ($("#ContactsPhone").val().trim() == "") {
        //    $("#trOrderPayIsSendSMS").hide();
        //}
        $("input#chkOrderPayIsSendSMS").attr("name", "chkOrderPayIsSendSMS");
        if ($("input#chkOrderPayIsSendSMS").prop("checked")) {
            $('input[name="OrderPayIsSendSMS"]').val("True");
        }
		$("#Name").focus();
		var oldStatus = "@ViewBag.Status";
		$('input[name="Status"]').val(oldStatus);
		$("input#statusCheckbox").click(function () {

			var status = $(this).attr('status');

			if ($(this).attr('checked') == 'checked') {
				$(this).val(status);
				$('input[name="Status"]').val(status);
			} else {
				$(this).val(oldStatus);
				$('input[name="Status"]').val(oldStatus);
			}
		});
        $("#chkOrderPayIsSendSMS").click(function () {


            if ($(this).prop('checked')) {
                $(this).val("True");
                $('input[name="OrderPayIsSendSMS"]').val("True");
            } else {
                $(this).val("False");
                $('input[name="OrderPayIsSendSMS"]').val("False");
            }
        });
		$(".form_datetime").datetimepicker({
			language: 'zh-CN',
			format: 'yyyy-mm-dd',
			autoclose: true,
			weekStart: 1,
			minView: 2
		});

		$('#IDCardUrl').himallUpload({
			title: '<b>*</b>身份证正面照片<br>电子版：',
			imageDescript: '身份证正面照(请确保图片清晰)',
			displayImgSrc: '@(Himall.Core.HimallIO.GetImagePath(Model.IDCardUrl))',
            imgFieldName: "IDCardUrl",
            dataWidth: 10
        });

        $('#IDCardUrl2').himallUpload({
            title: '<b>*</b>身份证背面照片<br>电子版：',
            imageDescript: '身份证背面照(请确保图片清晰)',
            displayImgSrc: '@(Himall.Core.HimallIO.GetImagePath(Model.IDCardUrl2))',
            imgFieldName: "IDCardUrl2",
            dataWidth: 10
        });
        $("#ContactsPhone").blur(function (e) {
                if ($(this).val() != "") {
                    $.dialog.errorTips('请输入正确的联系号码');
                }
                //$("#trOrderPayIsSendSMS").hide();
                //$("#chkOrderPayIsSendSMS").prop("checked", false);
                //$('input[name="OrderPayIsSendSMS"]').val("False");
        })

    });
    // 验证手机号
    function IsMobbile(phone) {
        var pattern = /^1[3456789]\d{9}$/;
        return pattern.test(phone);
    }

</script>

<div class="container">
    <ul class="breadcrumb clearfix">

        <li><a href="./Management">店铺管理</a></li>
        <li><a>编辑店铺</a></li>

    </ul>
    <div class="queryDiv">
        <img class="queryImg" src="/Images/ic_query.png">
        <div class="tipBox">
            <h5>温馨提示:</h5>
            <ul>
                <li><span>官方自营店默认拥有所有类目的经营权限，入驻商家需要申请经营类目。</span></li>
                <li><span>商家冻结后，商家将无法登录卖家中心，店铺所有商品都会下架， 商家下面的所有门店也会冻结。商家解冻后，所有商品需要重新上架，所有门店也需要重新解冻。</span></li>
            </ul>
        </div>
    </div>
    @using (Html.BeginForm("Edit", "Shop", new { Area = "Admin" }, FormMethod.Post, new { @id = "shopEditForm" }))
    {
        @Html.HiddenFor(s => s.Id)


        <h3 class="table-hd clear-v2">个人信息</h3>
        <table class="table table-bordered table-striped">
            <colgroup>
                <col class="col-xs-1">
                <col class="col-xs-7">
            </colgroup>
            <tbody>
                <tr>
                    <td>姓名</td>
                    <td>@Html.TextBoxFor(c => c.CompanyName, new { @class = "form-control input-sm w240" })</td>
                </tr>
                <tr>
                    <td>住址</td>
                    <td>

                        <div class="field">
                            <div id="regionSelector" class="fl"></div>
                            <div class="clr"></div>
                            @Html.HiddenFor(p => p.NewCompanyRegionId)
                        </div>

                    </td>
                </tr>
                <tr>
                    <td>详细地址</td>
                    <td>@Html.TextBoxFor(c => c.CompanyAddress, new { @class = "form-control input-sm w240" })</td>
                </tr>

            </tbody>
        </table>


        <h3 class="table-hd">身份信息</h3>
        <table class="table table-bordered table-striped">
            <colgroup>
                <col class="col-xs-1">
                <col class="col-xs-7">
            </colgroup>
            <tbody>
                <tr>
                    <td>身份证号码</td>
                    <td>@Html.TextBoxFor(s => s.IDCard, new { @class = "form-control input-sm w240" })</td>
                </tr>
                <tr>
                    <td>上传身份证照</td>
                    <td>
                        <div class="form-group upload-img" id="IDCardUrl"></div>
                        <div class="form-group upload-img" id="IDCardUrl2"></div>
                    </td>
                </tr>
            </tbody>
        </table>





        <h3 class="table-hd">店铺经营信息</h3>
        <table class="table table-bordered table-striped">
            <colgroup>
                <col class="col-xs-1">
                <col class="col-xs-7">
            </colgroup>
            <tbody>
                <tr>
                    <td>卖家帐号</td>
                    <td>@Model.Account</td>
                </tr>
                <tr>
                    <td>店铺名称</td>
                    <td>@Html.TextBoxFor(s => s.Name, new { @class = "form-control input-sm w240" })</td>
                </tr>
                <tr>
                    <td>店铺等级</td>
                    <td>
                        @{
                            var list = ((List<SelectListItem>)ViewBag.ShopGrade);
                        }
                        @Html.GenerateSelectHtml(list, "ShopGrade", "w240")
                    </td>
                </tr>
                <tr>
                    <td>店铺有效期</td>
                    <td>@Html.TextBoxFor(s => s.EndDate, new { @class = "form-control input-sm form_datetime w240" })</td>
                </tr>
                <tr>
                    <td>联系人姓名</td>
                    <td>@Html.TextBoxFor(s => s.ContactsName, new { @class = "form-control input-sm w240" })</td>
                </tr>
                <tr>
                    <td>联系号码</td>
                    <td>@Html.TextBoxFor(s => s.ContactsPhone, new { @class = "form-control input-sm w240" })</td>
                </tr>
                <tr>
                    <td>联系邮箱</td>
                    <td>@Html.TextBoxFor(s => s.ContactsEmail, new { @class = "form-control input-sm w240" })</td>
                </tr>

                <tr id="trOrderPayIsSendSMS">
                    <td nowrap="nowrap">订单支付是否短信通知</td>
                    <td>
                        @Html.CheckBox("OrderPayIsSendSMS", Model.OrderPayIsSendSMS, new { status = Model.OrderPayIsSendSMS, id = "chkOrderPayIsSendSMS", name = "chkOrderPayIsSendSMS", value = Model.OrderPayIsSendSMS })
                    </td>
                </tr>
                <tr style="display:none">
                    @*<td>店铺状态</td>
                        <td>*@
                    <td>
                        @{
                            //string name = "冻结";
                            //int status = 7;
                            //if (6 == (int)ViewBag.Status)
                            //{
                            //    name = "开启";
                            //}
                            //else if (7 == (int)ViewBag.Status)
                            //{
                            //    status = 6;
                            //}
                        }

                        @*@Html.CheckBox("Status", false, new { status = status, id = "statusCheckbox", value = ViewBag.Status }) @name
                            </td>*@
                        @Html.CheckBox("Status", false, new { status = (int)ViewBag.Status, id = "statusCheckbox", value = ViewBag.Status })
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td><button type="button" id="submit" class="btn btn-primary">保 存</button></td>
                </tr>

            </tbody>
        </table>


    }
</div>
